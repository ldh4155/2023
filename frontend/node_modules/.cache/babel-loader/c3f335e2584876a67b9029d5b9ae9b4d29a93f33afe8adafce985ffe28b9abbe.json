{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\KNUser\\\\Desktop\\\\Teamproject\\\\frontend\\\\src\\\\page\\\\board\\\\Update.js\",\n  _s = $RefreshSig$();\nimport axios from \"axios\";\nimport { useEffect, useState } from \"react\";\nimport { Link, useNavigate, useParams } from \"react-router-dom\";\nimport BoardInput from \"../../components/BoardInput\";\nimport { api } from \"../../api/api\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Update(props) {\n  _s();\n  let token = localStorage.getItem(\"token\");\n  const {\n    id\n  } = useParams();\n  const [boardData, setBoardData] = useState({\n    title: \"\",\n    content: \"\",\n    files: []\n  });\n  const navigate = useNavigate();\n  useEffect(() => {\n    api.get(`board/${id}`).then(res => {\n      setBoardData({\n        title: res.data.title,\n        content: res.data.content,\n        files: res.data.imageUrls\n      });\n    }).catch(error => {\n      console.log(error);\n    });\n  }, [id]);\n  function ChangeValue(event) {\n    setBoardData({\n      ...boardData,\n      [event.target.name]: event.target.value\n    });\n    console.log(boardData);\n  }\n  function SubmitBoard(event) {\n    event.preventDefault();\n    const formData = new FormData();\n    formData.append(\"title\", boardData.title);\n    formData.append(\"content\", boardData.content);\n    boardData.files.forEach(file => formData.append(\"files\", file));\n    api.put(`board/${id}`, formData).then(res => {\n      if (res.status === 200) {\n        console.log(\"여기\");\n        console.log(boardData);\n        alert(\"게시글 수정이 완료 되었습니다.\");\n        navigate(`/board/${id}`);\n      } else {\n        console.log(\"여기\");\n        alert(\"게시글 수정 실패1.\");\n      }\n    }).catch(error => {\n      console.error(error);\n      alert(\"게시글 수정 실패2.\");\n    });\n  }\n  function handleFileChange(event) {\n    // 새로 추가된 파일들을 현재 state에 추가\n    const newFiles = Array.from(event.target.files);\n    setBoardData({\n      ...boardData,\n      files: [...boardData.files, ...newFiles]\n    });\n    console.log(boardData);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(BoardInput, {\n      SubmitBoard: SubmitBoard,\n      boardData: boardData,\n      ChangeValue: ChangeValue,\n      handleFileChange: handleFileChange\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 78,\n    columnNumber: 5\n  }, this);\n}\n_s(Update, \"LPCKtYz8c515124i1IJrec0hNnw=\", false, function () {\n  return [useParams, useNavigate];\n});\n_c = Update;\nvar _c;\n$RefreshReg$(_c, \"Update\");","map":{"version":3,"names":["axios","useEffect","useState","Link","useNavigate","useParams","BoardInput","api","jsxDEV","_jsxDEV","Update","props","_s","token","localStorage","getItem","id","boardData","setBoardData","title","content","files","navigate","get","then","res","data","imageUrls","catch","error","console","log","ChangeValue","event","target","name","value","SubmitBoard","preventDefault","formData","FormData","append","forEach","file","put","status","alert","handleFileChange","newFiles","Array","from","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/KNUser/Desktop/Teamproject/frontend/src/page/board/Update.js"],"sourcesContent":["import axios from \"axios\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { Link, useNavigate, useParams } from \"react-router-dom\";\r\n\r\nimport BoardInput from \"../../components/BoardInput\";\r\nimport { api } from \"../../api/api\";\r\n\r\nexport default function Update(props) {\r\n  let token = localStorage.getItem(\"token\");\r\n  const { id } = useParams();\r\n  const [boardData, setBoardData] = useState({\r\n    title: \"\",\r\n    content: \"\",\r\n    files: [],\r\n  });\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    api\r\n      .get(`board/${id}`)\r\n      .then((res) => {\r\n        setBoardData({\r\n          title: res.data.title,\r\n          content: res.data.content,\r\n          files: res.data.imageUrls,\r\n        });\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n      });\r\n  }, [id]);\r\n\r\n  function ChangeValue(event) {\r\n    setBoardData({\r\n      ...boardData,\r\n      [event.target.name]: event.target.value,\r\n    });\r\n    console.log(boardData);\r\n  }\r\n\r\n  function SubmitBoard(event) {\r\n    event.preventDefault();\r\n\r\n    const formData = new FormData();\r\n    formData.append(\"title\", boardData.title);\r\n    formData.append(\"content\", boardData.content);\r\n    boardData.files.forEach((file) => formData.append(\"files\", file));\r\n    api\r\n      .put(`board/${id}`, formData)\r\n      .then((res) => {\r\n        if (res.status === 200) {\r\n          console.log(\"여기\");\r\n          console.log(boardData);\r\n          alert(\"게시글 수정이 완료 되었습니다.\");\r\n\r\n          navigate(`/board/${id}`);\r\n        } else {\r\n          console.log(\"여기\");\r\n          alert(\"게시글 수정 실패1.\");\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        console.error(error);\r\n        alert(\"게시글 수정 실패2.\");\r\n      });\r\n  }\r\n  function handleFileChange(event) {\r\n    // 새로 추가된 파일들을 현재 state에 추가\r\n    const newFiles = Array.from(event.target.files);\r\n    setBoardData({\r\n      ...boardData,\r\n      files: [...boardData.files, ...newFiles],\r\n    });\r\n    console.log(boardData);\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <BoardInput\r\n        SubmitBoard={SubmitBoard}\r\n        boardData={boardData}\r\n        ChangeValue={ChangeValue}\r\n        handleFileChange={handleFileChange}\r\n      />\r\n    </div>\r\n\r\n  );\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}