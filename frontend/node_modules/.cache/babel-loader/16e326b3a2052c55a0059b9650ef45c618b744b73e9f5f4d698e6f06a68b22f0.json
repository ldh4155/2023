{"ast":null,"code":"import { api } from \"./api\";\nimport store from '../redux/store';\nimport { LogoutUser } from \"../redux/Action/LoginAction\";\nexport const refreshAccessToken = async () => {\n  try {\n    const response = await api.post(`reissue`, {}, {\n      withCredentials: true\n    });\n    const accessToken = response.headers[\"access\"];\n    console.log(\"access\", accessToken);\n    if (!accessToken) {\n      throw new Error(\"Access token이 없습니다.\");\n    }\n    localStorage.setItem(\"access\", accessToken);\n  } catch (error) {\n    console.log(\"재발급 실패\");\n    localStorage.removeItem('access');\n    console.error(error.response ? error.response.status : error.message);\n    store.dispatch(LogoutUser());\n\n    // Custom event 발생\n    window.dispatchEvent(new CustomEvent(\"unauthorized\"));\n    throw error; // 중요한 부분: 오류를 던져서 상위에서 처리하게 함\n  }\n};","map":{"version":3,"names":["api","store","LogoutUser","refreshAccessToken","response","post","withCredentials","accessToken","headers","console","log","Error","localStorage","setItem","error","removeItem","status","message","dispatch","window","dispatchEvent","CustomEvent"],"sources":["C:/Users/user/2023TeamProject/graduate/frontend/src/api/reissue.js"],"sourcesContent":["import { api } from \"./api\";\r\nimport store from '../redux/store';\r\nimport { LogoutUser } from \"../redux/Action/LoginAction\";\r\nexport const refreshAccessToken = async () => {\r\n  try {\r\n    const response = await api.post(`reissue`, {}, { withCredentials: true }); \r\n    const accessToken = response.headers[\"access\"];\r\n    console.log(\"access\", accessToken);\r\n    if (!accessToken) {\r\n      throw new Error(\"Access token이 없습니다.\");\r\n    }\r\n    localStorage.setItem(\"access\", accessToken);\r\n  } catch (error) {\r\n    console.log(\"재발급 실패\")\r\n    localStorage.removeItem('access');\r\n    console.error(error.response ? error.response.status : error.message);\r\n    store.dispatch(LogoutUser());\r\n\r\n    // Custom event 발생\r\n    window.dispatchEvent(new CustomEvent(\"unauthorized\"));\r\n    throw error; // 중요한 부분: 오류를 던져서 상위에서 처리하게 함\r\n  }\r\n};"],"mappings":"AAAA,SAASA,GAAG,QAAQ,OAAO;AAC3B,OAAOC,KAAK,MAAM,gBAAgB;AAClC,SAASC,UAAU,QAAQ,6BAA6B;AACxD,OAAO,MAAMC,kBAAkB,GAAG,MAAAA,CAAA,KAAY;EAC5C,IAAI;IACF,MAAMC,QAAQ,GAAG,MAAMJ,GAAG,CAACK,IAAI,CAAE,SAAQ,EAAE,CAAC,CAAC,EAAE;MAAEC,eAAe,EAAE;IAAK,CAAC,CAAC;IACzE,MAAMC,WAAW,GAAGH,QAAQ,CAACI,OAAO,CAAC,QAAQ,CAAC;IAC9CC,OAAO,CAACC,GAAG,CAAC,QAAQ,EAAEH,WAAW,CAAC;IAClC,IAAI,CAACA,WAAW,EAAE;MAChB,MAAM,IAAII,KAAK,CAAC,qBAAqB,CAAC;IACxC;IACAC,YAAY,CAACC,OAAO,CAAC,QAAQ,EAAEN,WAAW,CAAC;EAC7C,CAAC,CAAC,OAAOO,KAAK,EAAE;IACdL,OAAO,CAACC,GAAG,CAAC,QAAQ,CAAC;IACrBE,YAAY,CAACG,UAAU,CAAC,QAAQ,CAAC;IACjCN,OAAO,CAACK,KAAK,CAACA,KAAK,CAACV,QAAQ,GAAGU,KAAK,CAACV,QAAQ,CAACY,MAAM,GAAGF,KAAK,CAACG,OAAO,CAAC;IACrEhB,KAAK,CAACiB,QAAQ,CAAChB,UAAU,CAAC,CAAC,CAAC;;IAE5B;IACAiB,MAAM,CAACC,aAAa,CAAC,IAAIC,WAAW,CAAC,cAAc,CAAC,CAAC;IACrD,MAAMP,KAAK,CAAC,CAAC;EACf;AACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}