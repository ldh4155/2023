{"ast":null,"code":"import { api } from \"./api\";\nexport const refreshAccessToken = async () => {\n  try {\n    console.log(\"재발급 요청\");\n    const response = await api.post(`reissue`, {}, {\n      withCredentials: true\n    });\n    console.log(\"재발급 성공\");\n    const accessToken = response.headers[\"access\"];\n    console.log(\"access\", accessToken);\n    localStorage.setItem(\"access\", accessToken);\n  } catch (error) {\n    console.log(\"재발급 실패\");\n    console.error(error.response.status);\n    await api.post(`signout`, {}, {\n      withCredentials: true\n    });\n    localStorage.removeItem('access');\n\n    // Custom event 발생\n    window.dispatchEvent(new CustomEvent(\"unauthorized\"));\n  }\n};","map":{"version":3,"names":["api","refreshAccessToken","console","log","response","post","withCredentials","accessToken","headers","localStorage","setItem","error","status","removeItem","window","dispatchEvent","CustomEvent"],"sources":["C:/Users/user/2023TeamProject/graduate/frontend/src/api/reissue.js"],"sourcesContent":["import { api } from \"./api\";\r\n\r\nexport const refreshAccessToken = async () => {\r\n    try {\r\n      console.log(\"재발급 요청\")\r\n      const response = await api.post(`reissue`, {}, { withCredentials: true }); \r\n      console.log(\"재발급 성공\")\r\n      const accessToken = response.headers[\"access\"];\r\n      console.log(\"access\" , accessToken);\r\n      localStorage.setItem(\"access\", accessToken);\r\n    } catch (error) {\r\n      console.log(\"재발급 실패\")\r\n      console.error(error.response.status);\r\n      await api.post(`signout`, {}, { withCredentials: true });\r\n      localStorage.removeItem('access');\r\n  \r\n      // Custom event 발생\r\n      window.dispatchEvent(new CustomEvent(\"unauthorized\"));\r\n    }\r\n  };"],"mappings":"AAAA,SAASA,GAAG,QAAQ,OAAO;AAE3B,OAAO,MAAMC,kBAAkB,GAAG,MAAAA,CAAA,KAAY;EAC1C,IAAI;IACFC,OAAO,CAACC,GAAG,CAAC,QAAQ,CAAC;IACrB,MAAMC,QAAQ,GAAG,MAAMJ,GAAG,CAACK,IAAI,CAAE,SAAQ,EAAE,CAAC,CAAC,EAAE;MAAEC,eAAe,EAAE;IAAK,CAAC,CAAC;IACzEJ,OAAO,CAACC,GAAG,CAAC,QAAQ,CAAC;IACrB,MAAMI,WAAW,GAAGH,QAAQ,CAACI,OAAO,CAAC,QAAQ,CAAC;IAC9CN,OAAO,CAACC,GAAG,CAAC,QAAQ,EAAGI,WAAW,CAAC;IACnCE,YAAY,CAACC,OAAO,CAAC,QAAQ,EAAEH,WAAW,CAAC;EAC7C,CAAC,CAAC,OAAOI,KAAK,EAAE;IACdT,OAAO,CAACC,GAAG,CAAC,QAAQ,CAAC;IACrBD,OAAO,CAACS,KAAK,CAACA,KAAK,CAACP,QAAQ,CAACQ,MAAM,CAAC;IACpC,MAAMZ,GAAG,CAACK,IAAI,CAAE,SAAQ,EAAE,CAAC,CAAC,EAAE;MAAEC,eAAe,EAAE;IAAK,CAAC,CAAC;IACxDG,YAAY,CAACI,UAAU,CAAC,QAAQ,CAAC;;IAEjC;IACAC,MAAM,CAACC,aAAa,CAAC,IAAIC,WAAW,CAAC,cAAc,CAAC,CAAC;EACvD;AACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}