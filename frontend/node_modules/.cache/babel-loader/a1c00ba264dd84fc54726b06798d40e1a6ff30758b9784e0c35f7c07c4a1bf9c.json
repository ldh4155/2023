{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\user\\\\2023TeamProject\\\\graduate\\\\frontend\\\\src\\\\page\\\\board\\\\Update.js\",\n  _s = $RefreshSig$();\nimport axios from \"axios\";\nimport { useEffect, useState } from \"react\";\nimport { Link, useNavigate, useParams } from \"react-router-dom\";\nimport BoardInput from \"../../components/BoardInput\";\nimport { api } from \"../../api/api\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Update(props) {\n  _s();\n  let token = localStorage.getItem(\"token\");\n  const {\n    id\n  } = useParams();\n  const [boardData, setBoardData] = useState({\n    title: \"\",\n    content: \"\",\n    files: [],\n    category: \"\" // 카테고리 추가\n  });\n  const navigate = useNavigate();\n  useEffect(() => {\n    api.get(`board/${id}`).then(res => {\n      setBoardData({\n        title: res.data.title,\n        content: res.data.content,\n        files: res.data.imageUrls,\n        category: res.data.category // 카테고리 추가\n      });\n    }).catch(error => {\n      console.log(error);\n    });\n  }, [id]);\n  function ChangeValue(event) {\n    setBoardData({\n      ...boardData,\n      [event.target.name]: event.target.value\n    });\n    console.log(boardData);\n  }\n  function SubmitBoard(event) {\n    event.preventDefault();\n    const formData = new FormData();\n    formData.append(\"title\", boardData.title);\n    formData.append(\"content\", boardData.content);\n    formData.append(\"category\", boardData.category); // 카테고리 추가\n    boardData.files.forEach(file => formData.append(\"files\", file));\n    api.put(`board/${id}`, formData).then(res => {\n      if (res.status === 200) {\n        console.log(\"여기\");\n        console.log(boardData);\n        alert(\"게시글 수정이 완료 되었습니다.\");\n        navigate(`/board/${id}`);\n      } else {\n        console.log(\"여기\");\n        alert(\"게시글 수정 실패1.\");\n      }\n    }).catch(error => {\n      console.error(error);\n      alert(\"게시글 수정 실패2.\");\n    });\n  }\n  function handleFileChange(event) {\n    const newFiles = Array.from(event.target.files);\n    setBoardData({\n      ...boardData,\n      files: [...boardData.files, ...newFiles]\n    });\n    console.log(boardData);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(BoardInput, {\n      SubmitBoard: SubmitBoard,\n      boardData: boardData,\n      ChangeValue: ChangeValue,\n      handleFileChange: handleFileChange\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 79,\n    columnNumber: 9\n  }, this);\n}\n_s(Update, \"gBwb8fJnUzc93akVgP7HqapY3E4=\", false, function () {\n  return [useParams, useNavigate];\n});\n_c = Update;\nvar _c;\n$RefreshReg$(_c, \"Update\");","map":{"version":3,"names":["axios","useEffect","useState","Link","useNavigate","useParams","BoardInput","api","jsxDEV","_jsxDEV","Update","props","_s","token","localStorage","getItem","id","boardData","setBoardData","title","content","files","category","navigate","get","then","res","data","imageUrls","catch","error","console","log","ChangeValue","event","target","name","value","SubmitBoard","preventDefault","formData","FormData","append","forEach","file","put","status","alert","handleFileChange","newFiles","Array","from","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/user/2023TeamProject/graduate/frontend/src/page/board/Update.js"],"sourcesContent":["import axios from \"axios\";\nimport { useEffect, useState } from \"react\";\nimport { Link, useNavigate, useParams } from \"react-router-dom\";\nimport BoardInput from \"../../components/BoardInput\";\nimport { api } from \"../../api/api\";\n\nexport default function Update(props) {\n    let token = localStorage.getItem(\"token\");\n    const { id } = useParams();\n    const [boardData, setBoardData] = useState({\n        title: \"\",\n        content: \"\",\n        files: [],\n        category: \"\", // 카테고리 추가\n    });\n    const navigate = useNavigate();\n\n    useEffect(() => {\n        api\n            .get(`board/${id}`)\n            .then((res) => {\n                setBoardData({\n                    title: res.data.title,\n                    content: res.data.content,\n                    files: res.data.imageUrls,\n                    category: res.data.category, // 카테고리 추가\n                });\n            })\n            .catch((error) => {\n                console.log(error);\n            });\n    }, [id]);\n\n    function ChangeValue(event) {\n        setBoardData({\n            ...boardData,\n            [event.target.name]: event.target.value,\n        });\n        console.log(boardData);\n    }\n\n    function SubmitBoard(event) {\n        event.preventDefault();\n\n        const formData = new FormData();\n        formData.append(\"title\", boardData.title);\n        formData.append(\"content\", boardData.content);\n        formData.append(\"category\", boardData.category); // 카테고리 추가\n        boardData.files.forEach((file) => formData.append(\"files\", file));\n        api\n            .put(`board/${id}`, formData)\n            .then((res) => {\n                if (res.status === 200) {\n                    console.log(\"여기\");\n                    console.log(boardData);\n                    alert(\"게시글 수정이 완료 되었습니다.\");\n                    navigate(`/board/${id}`);\n                } else {\n                    console.log(\"여기\");\n                    alert(\"게시글 수정 실패1.\");\n                }\n            })\n            .catch((error) => {\n                console.error(error);\n                alert(\"게시글 수정 실패2.\");\n            });\n    }\n\n    function handleFileChange(event) {\n        const newFiles = Array.from(event.target.files);\n        setBoardData({\n            ...boardData,\n            files: [...boardData.files, ...newFiles],\n        });\n        console.log(boardData);\n    }\n\n    return (\n        <div>\n            <BoardInput\n                SubmitBoard={SubmitBoard}\n                boardData={boardData}\n                ChangeValue={ChangeValue}\n                handleFileChange={handleFileChange}\n            />\n        </div>\n    );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}