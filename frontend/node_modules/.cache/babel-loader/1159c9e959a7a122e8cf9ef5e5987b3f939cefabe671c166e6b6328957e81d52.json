{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\user\\\\2023TeamProject\\\\graduate\\\\frontend\\\\src\\\\components\\\\Comment.js\",\n  _s = $RefreshSig$();\nimport axios from \"axios\";\nimport React, { useState } from 'react';\nimport CommentWrite from \"./CommentWrite\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Comment = ({\n  boardId,\n  comments\n}) => {\n  _s();\n  const [commentList, setCommentList] = useState(comments);\n  const [visible, setVisible] = useState(10);\n  const [editingId, setEditingId] = useState(null);\n  const [editComment, setEditComment] = useState({\n    id: null,\n    content: null\n  });\n  const showMore = () => {\n    setVisible(prevValue => prevValue + 10);\n  };\n  const deleteComment = async id => {\n    try {\n      await axios.delete(`http://localhost:8080/board/${boardId}/comment/${id}`);\n      alert(\"삭제 성공\");\n      const newComments = commentList.filter(comment => comment.id !== id);\n      setCommentList(newComments);\n    } catch {\n      alert(\"삭제 실패\");\n    }\n  };\n  const updateComment = async editComment => {\n    console.log(editComment.id);\n    try {\n      const response = await axios.put(`http://localhost:8080/board/${boardId}/comment`, editComment);\n      console.log(response.data.comment);\n      setCommentList(commentList.map(comment => comment.id == response.data.id ? response.data : comment));\n      setEditingId(null);\n      setEditComment({\n        id: null,\n        comment: null\n      });\n      alert(\"수정 성공\");\n    } catch (error) {\n      console.error(error);\n      alert(\"수정 실패\");\n    }\n  };\n  const handleEditClick = id => {\n    setEditingId(id);\n  };\n  const newComment = newComment => {\n    setCommentList([...commentList, newComment]);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(CommentWrite, {\n      boardId: boardId,\n      newComment: newComment\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"\\uB313\\uAE00\\xA0\", commentList.length]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 15\n      }, this), commentList.slice(0, visible).map(comment => editingId == comment.id ? /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          defaultValue: comment.comment,\n          onChange: e => setEditComment({\n            id: editingId,\n            content: e.target.value\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => updateComment(editComment),\n          children: \"\\uC800\\uC7A5\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 19\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: comment.memberNickName\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 19\n        }, this), \"\\xA0\\xA0\\xA0\", /*#__PURE__*/_jsxDEV(\"span\", {\n          children: comment.createTime\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 19\n        }, this), \"\\xA0\", /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => handleEditClick(comment.id),\n          children: \"\\uC218\\uC815\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 19\n        }, this), \"\\xA0\", /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => deleteComment(comment.id),\n          children: \"\\uC0AD\\uC81C\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 19\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: comment.content\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 19\n        }, this)]\n      }, comment.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 17\n      }, this)), visible < commentList.length && /*#__PURE__*/_jsxDEV(\"p\", {\n        onClick: showMore,\n        children: \"\\uB354\\uBCF4\\uAE30\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 12\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 57,\n    columnNumber: 9\n  }, this);\n};\n_s(Comment, \"fLgGMu1gRFfXqfFx6FmzIg8W/eE=\");\n_c = Comment;\nexport default Comment;\nvar _c;\n$RefreshReg$(_c, \"Comment\");","map":{"version":3,"names":["axios","React","useState","CommentWrite","jsxDEV","_jsxDEV","Comment","boardId","comments","_s","commentList","setCommentList","visible","setVisible","editingId","setEditingId","editComment","setEditComment","id","content","showMore","prevValue","deleteComment","delete","alert","newComments","filter","comment","updateComment","console","log","response","put","data","map","error","handleEditClick","newComment","children","fileName","_jsxFileName","lineNumber","columnNumber","length","slice","type","defaultValue","onChange","e","target","value","onClick","memberNickName","createTime","_c","$RefreshReg$"],"sources":["C:/Users/user/2023TeamProject/graduate/frontend/src/components/Comment.js"],"sourcesContent":["import axios from \"axios\";\r\nimport React, { useState } from 'react';\r\nimport CommentWrite from \"./CommentWrite\";\r\n\r\nconst Comment = ({boardId, comments}) => {\r\n\r\n    const [commentList, setCommentList] = useState(comments);\r\n    const [visible,setVisible] = useState(10);\r\n    const [editingId,setEditingId] = useState(null);\r\n    const [editComment, setEditComment] = useState({\r\n        id: null,\r\n        content: null\r\n    });\r\n    \r\n    const showMore = () => {\r\n        setVisible((prevValue) => prevValue + 10);\r\n    }\r\n\r\n    const deleteComment = async(id) => {\r\n        try {\r\n            await axios.delete(`http://localhost:8080/board/${boardId}/comment/${id}`)\r\n            alert(\"삭제 성공\")\r\n\r\n            const newComments = commentList.filter(comment => comment.id !== id);\r\n            setCommentList(newComments);\r\n        } catch {\r\n            alert(\"삭제 실패\")\r\n        }\r\n    }\r\n\r\n    const updateComment = async (editComment) => {\r\n        console.log(editComment.id);\r\n        try {\r\n            const response = await axios.put(`http://localhost:8080/board/${boardId}/comment`,editComment)\r\n            console.log(response.data.comment);\r\n            setCommentList(commentList.map(comment =>\r\n                comment.id == response.data.id ? response.data : comment));\r\n\r\n            setEditingId(null);\r\n            setEditComment({id : null, comment : null});\r\n            alert(\"수정 성공\")\r\n        }catch (error) {\r\n            console.error(error)\r\n            alert(\"수정 실패\")\r\n        }\r\n    }\r\n\r\n    const handleEditClick = (id) => {\r\n        setEditingId(id);\r\n    }\r\n\r\n    const newComment = (newComment) => {\r\n        setCommentList([...commentList, newComment]);\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            <CommentWrite boardId={boardId} newComment={newComment}/>\r\n           <div>\r\n              <p>댓글&nbsp;{commentList.length}</p>\r\n              {commentList.slice(0,visible).map((comment) => \r\n                editingId == comment.id ? (\r\n                  <div>\r\n                    <input type=\"text\" defaultValue={comment.comment} \r\n                      onChange={(e) => setEditComment({id: editingId, content: e.target.value})}/>\r\n                    <button onClick={() => updateComment(editComment)}>저장</button>\r\n                  </div>\r\n               ) : (\r\n                <div key={comment.id}>\r\n                  <span>{comment.memberNickName}</span>&nbsp;&nbsp;&nbsp;\r\n                  <span>{comment.createTime}</span>&nbsp;\r\n                  <button onClick={() => handleEditClick(comment.id)}>수정</button>&nbsp;\r\n                  <button onClick={() => deleteComment(comment.id)}>삭제</button>\r\n                  <p>{comment.content}</p>\r\n                </div>\r\n            ))}\r\n            {visible < commentList.length && (\r\n                <p onClick={showMore}>더보기</p>\r\n            )}\r\n          </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Comment;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}